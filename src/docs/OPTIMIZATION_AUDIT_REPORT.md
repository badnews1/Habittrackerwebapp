# üîç –û—Ç—á—ë—Ç: –ê—É–¥–∏—Ç –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã –ø–µ—Ä–µ–¥ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º

> **–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞:** 20 –Ω–æ—è–±—Ä—è 2025  
> **–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞:** ~170 —Ñ–∞–π–ª–æ–≤, –ø–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Zustand –∑–∞–≤–µ—Ä—à–µ–Ω–∞  
> **–¶–µ–ª—å:** –í—ã—è–≤–∏—Ç—å —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –º–æ–¥—É–ª—è—Ä–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –¥–∞–ª—å–Ω–µ–π—à–∏–º —Ä–∞–∑–≤–∏—Ç–∏–µ–º

---

## üìä Executive Summary

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:** ‚úÖ **–•–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç**

–ü—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç **—Å–æ–ª–∏–¥–Ω—ã–π —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç**:
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Zustand Store (8 slices)
- ‚úÖ –ß–∏—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø–æ feature-based –ø–æ–¥—Ö–æ–¥—É
- ‚úÖ Comprehensive –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (~5000 —Å—Ç—Ä–æ–∫)
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- ‚úÖ –ù–∞—á–∞–ª–æ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ —Å–ª–æ—è (NotificationService)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ü—Ä–æ–µ–∫—Ç **–≥–æ—Ç–æ–≤ –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é** —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏ (—Å–º. –Ω–∏–∂–µ).

---

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ

### 1. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Store** ‚≠ê‚≠ê‚≠ê
```
/stores/habitsStore/
‚îú‚îÄ‚îÄ index.ts           # –ì–ª–∞–≤–Ω—ã–π store
‚îú‚îÄ‚îÄ types.ts           # –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã
‚îú‚îÄ‚îÄ initialState.ts    # –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
‚îî‚îÄ‚îÄ slices/            # 8 –º–æ–¥—É–ª–µ–π
    ‚îú‚îÄ‚îÄ ui.ts          # ~80 —Å—Ç—Ä–æ–∫
    ‚îú‚îÄ‚îÄ modals.ts      # ~120 —Å—Ç—Ä–æ–∫
    ‚îú‚îÄ‚îÄ habits.ts      # ~180 —Å—Ç—Ä–æ–∫
    ‚îî‚îÄ‚îÄ ...
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ö–∞–∂–¥—ã–π slice 50-200 —Å—Ç—Ä–æ–∫ (–ª–µ–≥–∫–æ —á–∏—Ç–∞—Ç—å)
- ‚úÖ –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ features
- ‚úÖ –ù–µ–∑–∞–≤–∏—Å–∏–º–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ

**–í—ã–≤–æ–¥:** –û—Ç–ª–∏—á–Ω–∞—è –º–æ–¥—É–ª—è—Ä–∏–∑–∞—Ü–∏—è, –º–µ–Ω—è—Ç—å –Ω–µ –Ω—É–∂–Ω–æ! üéØ

---

### 2. **App.tsx - —á–∏—Å—Ç—ã–π –∏ –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π** ‚≠ê‚≠ê‚≠ê
```tsx
// –í—Å–µ–≥–æ ~320 —Å—Ç—Ä–æ–∫
// –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ props –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
const dateConfig: DateConfig = { selectedMonth, selectedYear, ... };
const habitActions: HabitActions = { onDelete, onToggleCompletion, ... };
const modalActions: ModalActions = { onAddHabit, onManageHabits, ... };
```

**–í—ã–≤–æ–¥:** –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞! ‚úÖ

---

### 3. **Feature-based —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤** ‚≠ê‚≠ê
```
/components/
‚îú‚îÄ‚îÄ habits/          # –í—Å—ë –ø—Ä–æ –ø—Ä–∏–≤—ã—á–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ add/        # –ü–æ–¥–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ manage/     # –ü–æ–¥–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ calendar/        # –í—Å—ë –ø—Ä–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—å
‚îú‚îÄ‚îÄ statistics/      # –í—Å—ë –ø—Ä–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
‚îî‚îÄ‚îÄ shared/          # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ
```

**–í—ã–≤–æ–¥:** –•–æ—Ä–æ—à–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è, –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ! ‚úÖ

---

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### **–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º:**
- üî¥ **–ö—Ä–∏—Ç–∏—á–Ω–∞—è** - —Ç—Ä–µ–±—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- üü° **–°—Ä–µ–¥–Ω—è—è** - –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä–µ–ª–∏–∑–∞
- üîµ **–ù–∏–∑–∫–∞—è** - –º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å, –Ω–æ –¥–µ—Ä–∂–∞—Ç—å –≤ —É–º–µ

---

## üü° –ü—Ä–æ–±–ª–µ–º–∞ #1: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ store —Å–µ–ª–µ–∫—Ç–æ—Ä—ã ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

> **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ 20 –Ω–æ—è–±—Ä—è 2025

### **–ß—Ç–æ –±—ã–ª–æ:**
```tsx
// /components/habits/AddHabitModal.tsx - 27 –û–¢–î–ï–õ–¨–ù–´–• –°–ï–õ–ï–ö–¢–û–†–û–í! üò±
const form = useHabitsStore((state) => state.addHabitForm);
const initializeAddHabitForm = useHabitsStore((state) => state.initializeAddHabitForm);
const resetAddHabitForm = useHabitsStore((state) => state.resetAddHabitForm);
const setFormName = useHabitsStore((state) => state.setFormName);
const setFormDescription = useHabitsStore((state) => state.setFormDescription);
const setFormIcon = useHabitsStore((state) => state.setFormIcon);
// ... –µ—â—ë 21 —Å–µ–ª–µ–∫—Ç–æ—Ä –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ
```

### **–ü—Ä–æ–±–ª–µ–º–∞:**
- ‚ùå –ö–∞–∂–¥—ã–π —Å–µ–ª–µ–∫—Ç–æ—Ä = –æ—Ç–¥–µ–ª—å–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ store (27 –ø–æ–¥–ø–∏—Å–æ–∫!)
- ‚ùå –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ª—é–±–æ–≥–æ –ø–æ–ª—è store
- ‚ùå –ù–∏–∑–∫–∞—è —á–∏—Ç–∞–µ–º–æ—Å—Ç—å (27 —Å—Ç—Ä–æ–∫ boilerplate)

### **–†–µ—à–µ–Ω–∏–µ: useShallow –æ—Ç Zustand**

**–ü–æ—Å–ª–µ (1 –ø–æ–¥–ø–∏—Å–∫–∞!):**
```tsx
import { useShallow } from 'zustand/react/shallow';

const { 
  form, 
  initializeAddHabitForm, 
  resetAddHabitForm,
  setFormName, 
  setFormIcon, 
  setFormDescription,
  // ... –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ (27 –ø–æ–ª–µ–π)
} = useHabitsStore(useShallow((state) => ({
  form: state.addHabitForm,
  initializeAddHabitForm: state.initializeAddHabitForm,
  resetAddHabitForm: state.resetAddHabitForm,
  setFormName: state.setFormName,
  setFormIcon: state.setFormIcon,
  // ...
})));
```

### **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –û–¥–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –≤–º–µ—Å—Ç–æ 27-–º–∏
- ‚úÖ –ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ (–º–µ–Ω—å—à–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–æ–≤)
- ‚úÖ –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞

### **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
```
‚úÖ /components/habits/AddHabitModal.tsx        - 27 —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ ‚Üí 1 useShallow (20 –Ω–æ—è–±—Ä—è 2025)
‚úÖ /components/habits/ManageHabitsModal.tsx    - 14 —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ ‚Üí 1 useShallow (20 –Ω–æ—è–±—Ä—è 2025)
‚úÖ /components/habits/HabitsTable.tsx          - 9 —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ ‚Üí 1 useShallow (20 –Ω–æ—è–±—Ä—è 2025)
```

### **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- **–î–æ:** 50 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫ –Ω–∞ store
- **–ü–æ—Å–ª–µ:** 3 –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏ —Å useShallow
- **–£–ª—É—á—à–µ–Ω–∏–µ:** ~94% —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫!

---

## üü° –ü—Ä–æ–±–ª–µ–º–∞ #2: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Ä–∞—Å—á—ë—Ç–∞ —Å–∏–ª—ã –ø—Ä–∏–≤—ã—á–∫–∏

### **–ß—Ç–æ:**
–û–¥–Ω–∞ –∏ —Ç–∞ –∂–µ –ª–æ–≥–∏–∫–∞ EMA —Ä–∞—Å—á—ë—Ç–∞ –≤ –¥–≤—É—Ö –º–µ—Å—Ç–∞—Ö:

**1. /utils/strengthCalculator.ts** (–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π —Ä–∞—Å—á—ë—Ç):
```ts
// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ App.tsx –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∏–ª—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
export const recalculateStrength = (habit: Habit) => {
  const N = 32; // –ü–µ—Ä–∏–æ–¥ EMA
  let strength = habit.strengthBaseline ?? 0;
  // ... EMA –∞–ª–≥–æ—Ä–∏—Ç–º
  return updatedHabit;
}
```

**2. /components/habits/HabitStatisticsModal.tsx** (–ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Å—á—ë—Ç):
```ts
// –î—É–±–ª–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏
function calculateStrengthHistory(habit: Habit) {
  const N = 32; // –ü–µ—Ä–∏–æ–¥ EMA (–¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è!)
  let strength = 0;
  // ... –¢–û–ñ–ï –°–ê–ú–û–ï EMA –∞–ª–≥–æ—Ä–∏—Ç–º
  return history;
}
```

### **–ü—Ä–æ–±–ª–µ–º–∞:**
- ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ (~70 —Å—Ç—Ä–æ–∫)
- ‚ùå –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ `N = 32` –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤ –¥–≤—É—Ö –º–µ—Å—Ç–∞—Ö
- ‚ùå –ï—Å–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å EMA –∞–ª–≥–æ—Ä–∏—Ç–º, –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å –≤ –¥–≤—É—Ö –º–µ—Å—Ç–∞—Ö
- ‚ùå –ù–∞—Ä—É—à–µ–Ω–∏–µ DRY –ø—Ä–∏–Ω—Ü–∏–ø–∞

### **–†–µ—à–µ–Ω–∏–µ: –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –≤ utils**

**–°–æ–∑–¥–∞—Ç—å `/utils/strengthHistoryCalculator.ts`:**
```ts
import { getCompletionValueForDate } from './habitUtils';
import { EMA_PERIOD } from '../constants'; // N = 32

/**
 * –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é —Å–∏–ª—ã –ø—Ä–∏–≤—ã—á–∫–∏ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞
 * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ HabitStatisticsModal
 */
export function calculateStrengthHistory(
  habit: Habit, 
  startDate?: Date
): Array<{ date: string; strength: number }> {
  const N = EMA_PERIOD;
  const history: Array<{ date: string; strength: number }> = [];
  let strength = 0;
  
  // ... –µ–¥–∏–Ω–∞—è –ª–æ–≥–∏–∫–∞ EMA
  
  return history;
}

/**
 * –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å–∏–ª—É –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É
 * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ strengthCalculator.ts
 */
export function calculateStrengthAtDate(
  habit: Habit,
  targetDate: string,
  baseStrength: number = 0
): number {
  // ... –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –ª–æ–≥–∏–∫–∞ –æ–¥–Ω–æ–≥–æ —à–∞–≥–∞ EMA
}
```

**–û–±–Ω–æ–≤–∏—Ç—å `/utils/strengthCalculator.ts`:**
```ts
import { calculateStrengthAtDate } from './strengthHistoryCalculator';

export const recalculateStrength = (habit: Habit) => {
  // –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–±—â—É—é –ª–æ–≥–∏–∫—É
  const strength = calculateStrengthAtDate(habit, todayStr, baseStrength);
  // ...
}
```

### **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∏—Å—Ç–∏–Ω—ã –¥–ª—è EMA –∞–ª–≥–æ—Ä–∏—Ç–º–∞
- ‚úÖ –õ–µ–≥—á–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- ‚úÖ –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ `/constants`

### **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° **–°—Ä–µ–¥–Ω–∏–π** (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç, –Ω–æ —É–ª—É—á—à–∏—Ç maintainability)

---

## üîµ –ü—Ä–æ–±–ª–µ–º–∞ #3: –ë–æ–ª—å—à–æ–π —Ñ–∞–π–ª habitUtils.ts

### **–ß—Ç–æ:**
```
/utils/habitUtils.ts - 303 —Å—Ç—Ä–æ–∫–∏
```

–°–æ–¥–µ—Ä–∂–∏—Ç **5 —Ä–∞–∑–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ñ—É–Ω–∫—Ü–∏–π**:
1. **Completion –ø—Ä–æ–≤–µ—Ä–∫–∏** (`isHabitCompletedForDate`, `getCompletionValueForDate`)
2. **Frequency —Ä–∞—Å—á—ë—Ç—ã** (`getMonthlyGoalFromFrequency`, `isRequiredByFrequency`)
3. **Frequency —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** (`formatFrequency`)
4. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** (–Ω–µ—è–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ–∑–¥–µ)
5. **–í–∞–ª–∏–¥–∞—Ü–∏—è** (—á–∞—Å—Ç–∏—á–Ω–æ)

### **–ü—Ä–æ–±–ª–µ–º–∞:**
- ‚ö†Ô∏è –§–∞–π–ª —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è "—Å–≤–∞–ª–∫–æ–π" –¥–ª—è –≤—Å–µ—Ö utils
- ‚ö†Ô∏è –°–ª–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é (3 —Å–∫—Ä–æ–ª–ª–∞)
- ‚ö†Ô∏è –ù–∞—Ä—É—à–µ–Ω–∏–µ Single Responsibility Principle

### **–†–µ—à–µ–Ω–∏–µ: –†–∞–∑–±–∏—Ç—å –Ω–∞ 3 –º–æ–¥—É–ª—è**

```
/utils/
‚îú‚îÄ‚îÄ habit/
‚îÇ   ‚îú‚îÄ‚îÄ index.ts                    # Barrel export
‚îÇ   ‚îú‚îÄ‚îÄ completionUtils.ts          # ~80 —Å—Ç—Ä–æ–∫ - isCompleted, getCompletionValue
‚îÇ   ‚îú‚îÄ‚îÄ frequencyUtils.ts           # ~150 —Å—Ç—Ä–æ–∫ - monthly goal, isRequired
‚îÇ   ‚îî‚îÄ‚îÄ frequencyFormatters.ts      # ~60 —Å—Ç—Ä–æ–∫ - formatFrequency
‚îú‚îÄ‚îÄ dateUtils.ts                    # –û—Å—Ç–∞—ë—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å
‚îú‚îÄ‚îÄ strengthCalculator.ts           # –û—Å—Ç–∞—ë—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å
‚îî‚îÄ‚îÄ ...
```

**–ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**

**`/utils/habit/completionUtils.ts`:**
```ts
/**
 * –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∏–≤—ã—á–µ–∫
 */
export function isHabitCompletedForDate(habit: Habit, dateStr: string): boolean { ... }
export function getCompletionValueForDate(habit: Habit, dateStr: string): number { ... }
```

**`/utils/habit/frequencyUtils.ts`:**
```ts
/**
 * –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ —á–∞—Å—Ç–æ—Ç—ã –ø—Ä–∏–≤—ã—á–µ–∫
 */
export function getMonthlyGoalFromFrequency(...) { ... }
export function isRequiredByFrequency(...) { ... }
```

**`/utils/habit/frequencyFormatters.ts`:**
```ts
/**
 * –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –≤ —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–π –≤–∏–¥
 */
export function formatFrequency(...) { ... }
```

**`/utils/habit/index.ts`:**
```ts
// Barrel export –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
export * from './completionUtils';
export * from './frequencyUtils';
export * from './frequencyFormatters';
```

**–ò–º–ø–æ—Ä—Ç –æ—Å—Ç–∞—ë—Ç—Å—è —Ç–µ–º –∂–µ:**
```ts
// –î–æ –∏ –ø–æ—Å–ª–µ - –æ–¥–∏–Ω–∞–∫–æ–≤–æ —Ä–∞–±–æ—Ç–∞–µ—Ç!
import { isHabitCompletedForDate, getMonthlyGoalFromFrequency } from '../utils/habit';
```

### **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å <100 —Å—Ç—Ä–æ–∫
- ‚úÖ –ß—ë—Ç–∫–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
- ‚úÖ –õ–µ–≥—á–µ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ barrel export
- ‚úÖ –õ–µ–≥—á–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ

### **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üîµ **–ù–∏–∑–∫–∏–π** (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç, –º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å –¥–æ 150+ —Ñ–∞–π–ª–æ–≤ –≤ /utils)

---

## üîµ –ü—Ä–æ–±–ª–µ–º–∞ #4: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ —Å–ª–æ—è –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

### **–ß—Ç–æ:**
–°–µ–π—á–∞—Å –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ `/services/notifications/NotificationService.ts`.

–ù–æ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–∞:
- EMA —Ä–∞—Å—á—ë—Ç—ã - –≤ `/utils/strengthCalculator.ts`
- Frequency –ª–æ–≥–∏–∫–∞ - –≤ `/utils/habitUtils.ts`
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ - –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö (`HabitStatisticsModal`)

### **–ü—Ä–æ–±–ª–µ–º–∞:**
- ‚ö†Ô∏è –°–ª–æ–∂–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Å–º–µ—à–∞–Ω–∞ —Å React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- ‚ö†Ô∏è –¢—Ä—É–¥–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å (–Ω—É–∂–µ–Ω React –¥–ª—è —Ç–µ—Å—Ç–æ–≤)
- ‚ö†Ô∏è –ù–µ–ª—å–∑—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω–µ React (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç)

### **–†–µ—à–µ–Ω–∏–µ: –°–æ–∑–¥–∞—Ç—å Service —Å–ª–æ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**

**–ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ —Å–µ–π—á–∞—Å, –Ω–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≥–æ–¥–∏—Ç—å—Å—è –ø—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏:**

```
/services/
‚îú‚îÄ‚îÄ notifications/           # ‚úÖ –£–∂–µ –µ—Å—Ç—å
‚îÇ   ‚îî‚îÄ‚îÄ NotificationService.ts
‚îú‚îÄ‚îÄ habits/                  # üÜï –ù–æ–≤–æ–µ
‚îÇ   ‚îú‚îÄ‚îÄ HabitService.ts      # CRUD + –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ StrengthService.ts   # EMA —Ä–∞—Å—á—ë—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ StatisticsService.ts # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ FrequencyService.ts  # –ß–∞—Å—Ç–æ—Ç–∞
‚îî‚îÄ‚îÄ storage/                 # üÜï –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
    ‚îî‚îÄ‚îÄ StorageService.ts    # –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –Ω–∞–¥ localStorage
```

**–ü—Ä–∏–º–µ—Ä HabitService.ts:**
```ts
/**
 * –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–∏–≤—ã—á–∫–∞–º–∏
 * –ß–∏—Å—Ç–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –±–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ React
 */
export class HabitService {
  static calculateMonthlyProgress(habit: Habit, month: number, year: number) {
    // –í—Å—è –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á—ë—Ç–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
    // –ë–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç React
  }
  
  static validateHabitData(data: HabitData): ValidationResult {
    // –í–∞–ª–∏–¥–∞—Ü–∏—è
  }
  
  static getStreakInfo(habit: Habit): StreakInfo {
    // –†–∞—Å—á—ë—Ç —Å–µ—Ä–∏–π
  }
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –õ—ë–≥–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–æ–±—ã—á–Ω—ã–π JS/TS –∫–ª–∞—Å—Å)
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–Ω–µ React
- ‚úÖ –ß—ë—Ç–∫–æ–µ Separation of Concerns
- ‚úÖ –ú–æ–∂–Ω–æ –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ù–æ:**
- ‚ùå –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è (overkill –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞)
- ‚ùå –ë–æ–ª—å—à–µ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏

### **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üîµ **–ù–∏–∑–∫–∏–π** (–º–æ–∂–Ω–æ –ø–æ–∫–∞ –Ω–µ –¥–µ–ª–∞—Ç—å, –Ω–æ –¥–µ—Ä–∂–∞—Ç—å –≤ —É–º–µ)

---

## üîµ –ü—Ä–æ–±–ª–µ–º–∞ #5: Callback hell –≤ ManageHabitsModal

### **–ß—Ç–æ:**
```tsx
// /components/habits/ManageHabitsModal.tsx - ~140 —Å—Ç—Ä–æ–∫ callbacks
const handleUpdateName = React.useCallback((id: string, name: string) => {
  updateLocalHabit(id, { name });
}, [updateLocalHabit]);

const handleUpdateDescription = React.useCallback((id: string, description: string) => {
  updateLocalHabit(id, { description });
}, [updateLocalHabit]);

const handleUpdateIcon = React.useCallback((id: string, icon: string) => {
  updateLocalHabit(id, { icon });
}, [updateLocalHabit]);

// ... –µ—â—ë 10 –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã—Ö
```

### **–ü—Ä–æ–±–ª–µ–º–∞:**
- ‚ö†Ô∏è –ú–Ω–æ–≥–æ boilerplate –∫–æ–¥–∞ (~140 —Å—Ç—Ä–æ–∫)
- ‚ö†Ô∏è –ü–æ—Ö–æ–∂–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è

### **–†–µ—à–µ–Ω–∏–µ: –û–±–æ–±—â—ë–Ω–Ω—ã–π handler**

**–î–æ (140 —Å—Ç—Ä–æ–∫):**
```tsx
const handleUpdateName = React.useCallback((id: string, name: string) => {
  updateLocalHabit(id, { name });
}, [updateLocalHabit]);

const handleUpdateDescription = React.useCallback((id: string, description: string) => {
  updateLocalHabit(id, { description });
}, [updateLocalHabit]);

// ... –µ—â—ë 10 —Ä–∞–∑
```

**–ü–æ—Å–ª–µ (10 —Å—Ç—Ä–æ–∫):**
```tsx
// –û–±–æ–±—â—ë–Ω–Ω—ã–π handler –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª–µ–π
const handleUpdateField = React.useCallback(<K extends keyof Habit>(
  id: string, 
  field: K, 
  value: Habit[K]
) => {
  updateLocalHabit(id, { [field]: value });
}, [updateLocalHabit]);

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
onUpdateName={(id, name) => handleUpdateField(id, 'name', name)}
onUpdateIcon={(id, icon) => handleUpdateField(id, 'icon', icon)}
```

**–ò–ª–∏ –µ—â—ë –∫–æ—Ä–æ—á–µ (3 —Å—Ç—Ä–æ–∫–∏!):**
```tsx
// –ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—ë–º updateLocalHabit –Ω–∞–ø—Ä—è–º—É—é
<HabitsList
  onUpdateName={(id, name) => updateLocalHabit(id, { name })}
  onUpdateIcon={(id, icon) => updateLocalHabit(id, { icon })}
  onUpdateDescription={(id, desc) => updateLocalHabit(id, { description: desc })}
/>
```

### **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ 140 —Å—Ç—Ä–æ–∫ ‚Üí 10 —Å—Ç—Ä–æ–∫
- ‚úÖ –ú–µ–Ω—å—à–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –õ–µ–≥—á–µ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª—è

### **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üîµ **–ù–∏–∑–∫–∏–π** (—Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

---

## üì¶ –ú–æ–¥—É–ª—è—Ä–∏–∑–∞—Ü–∏—è: –ù—É–∂–Ω–∞ –ª–∏?

### **–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
```
–í—Å–µ–≥–æ —Ñ–∞–π–ª–æ–≤: ~170
‚îú‚îÄ‚îÄ /components    - ~90 —Ñ–∞–π–ª–æ–≤ (feature-based) ‚úÖ
‚îú‚îÄ‚îÄ /stores        - 12 —Ñ–∞–π–ª–æ–≤ (–º–æ–¥—É–ª—å–Ω—ã–π store) ‚úÖ
‚îú‚îÄ‚îÄ /utils         - 9 —Ñ–∞–π–ª–æ–≤ ‚ö†Ô∏è (—Å–º. –ø—Ä–æ–±–ª–µ–º–∞ #3)
‚îú‚îÄ‚îÄ /types         - 6 —Ñ–∞–π–ª–æ–≤ ‚úÖ
‚îú‚îÄ‚îÄ /constants     - 7 —Ñ–∞–π–ª–æ–≤ ‚úÖ
‚îú‚îÄ‚îÄ /services      - 4 —Ñ–∞–π–ª–∞ (1 —Å–µ—Ä–≤–∏—Å) üîµ
‚îî‚îÄ‚îÄ /docs          - 16 —Ñ–∞–π–ª–æ–≤ ‚úÖ
```

### **–í—ã–≤–æ–¥: –ú–æ–¥—É–ª—è—Ä–∏–∑–∞—Ü–∏—è –£–ñ–ï –•–û–†–û–®–ê–Ø! ‚úÖ**

**–ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ Store —Ä–∞–∑–±–∏—Ç –Ω–∞ 8 slices (–æ—Ç–ª–∏—á–Ω–æ!)
- ‚úÖ Components –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã –ø–æ features
- ‚úÖ –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ –¢–∏–ø—ã –≤—ã–Ω–µ—Å–µ–Ω—ã –æ—Ç–¥–µ–ª—å–Ω–æ
- ‚úÖ Comprehensive –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å:**
- üü° –†–∞–∑–±–∏—Ç—å `/utils/habitUtils.ts` (–∫–æ–≥–¥–∞ –±—É–¥–µ—Ç >400 —Å—Ç—Ä–æ–∫)
- üîµ –î–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π (–∫–æ–≥–¥–∞ –ª–æ–≥–∏–∫–∞ —Å—Ç–∞–Ω–µ—Ç —Å–ª–æ–∂–Ω–µ–µ)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ü—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ç–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥! –ù–µ –Ω—É–∂–Ω–æ over-engineer.

---

## üéØ Roadmap: –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

### **–§–∞–∑–∞ 1: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (1-2 –¥–Ω—è)** üü°
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π

#### 1.1 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è store —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å `useShallow` –≤ `AddHabitModal.tsx` (54 —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ ‚Üí 1)
- [ ] –î–æ–±–∞–≤–∏—Ç—å `useShallow` –≤ `ManageHabitsModal.tsx`
- [ ] –î–æ–±–∞–≤–∏—Ç—å `useShallow` –≤ `HabitsTable.tsx`
- [ ] –ò–∑–º–µ—Ä–∏—Ç—å —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (React DevTools)

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- ‚ö° –ú–µ–Ω—å—à–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–æ–≤ (-30-50%)
- üìâ –ú–µ–Ω—å—à–µ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ (-200 —Å—Ç—Ä–æ–∫)
- ‚úÖ –õ—É—á—à–∞—è —á–∏—Ç–∞–µ–º–æ—Å—Ç—å

#### 1.2 –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è EMA –ª–æ–≥–∏–∫–∏
- [ ] –°–æ–∑–¥–∞—Ç—å `/utils/strengthHistoryCalculator.ts`
- [ ] –í—ã–Ω–µ—Å—Ç–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É `EMA_PERIOD` –≤ `/constants`
- [ ] –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å `calculateStrengthHistory()` –≤ `HabitStatisticsModal.tsx`
- [ ] –î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- ‚úÖ –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∏—Å—Ç–∏–Ω—ã
- üß™ –õ–µ–≥—á–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- üîß –ü—Ä–æ—â–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å

---

### **–§–∞–∑–∞ 2: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (2-3 –¥–Ω—è)** üîµ
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑–∫–∏–π (–º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å)

#### 2.1 –†–∞–∑–±–∏—Ç—å habitUtils.ts
- [ ] –°–æ–∑–¥–∞—Ç—å `/utils/habit/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
- [ ] –†–∞–∑–±–∏—Ç—å –Ω–∞ 3 –º–æ–¥—É–ª—è (completion, frequency, formatters)
- [ ] –î–æ–±–∞–≤–∏—Ç—å barrel export –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, barrel —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ)

#### 2.2 –£–ø—Ä–æ—Å—Ç–∏—Ç—å callbacks –≤ ManageHabitsModal
- [ ] –°–æ–∑–¥–∞—Ç—å –æ–±–æ–±—â—ë–Ω–Ω—ã–π `handleUpdateField`
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å 10+ callbacks –æ–¥–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

---

### **–§–∞–∑–∞ 3: –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (–±—É–¥—É—â–µ–µ)** üöÄ
**–ö–æ–≥–¥–∞:** –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –±–æ–ª—å—à–∏—Ö —Ñ–∏—á

#### 3.1 –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –°–æ–∑–¥–∞—Ç—å `HabitService.ts`
- [ ] –°–æ–∑–¥–∞—Ç—å `StrengthService.ts`
- [ ] –°–æ–∑–¥–∞—Ç—å `StatisticsService.ts`
- [ ] –í—ã–Ω–µ—Å—Ç–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

#### 3.2 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è utils (–æ—Å–æ–±–µ–Ω–Ω–æ EMA)
- [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è services
- [ ] Integration —Ç–µ—Å—Ç—ã –¥–ª—è Store slices

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

### **–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –û—Ü–µ–Ω–∫–∞ |
|---------|----------|--------|
| **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤** | 50-320 —Å—Ç—Ä–æ–∫ | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| **–ì–ª—É–±–∏–Ω–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏** | <4 —É—Ä–æ–≤–Ω—è | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞** | ~5% | üü° –ü—Ä–∏–µ–º–ª–µ–º–æ |
| **–°–≤—è–∑–Ω–æ—Å—Ç—å** | –í—ã—Å–æ–∫–∞—è | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** | 16 —Ñ–∞–π–ª–æ–≤ | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| **Type Safety** | 100% TypeScript | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |

### **–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**

| –ú–µ—Ç—Ä–∏–∫–∞ | –¢–µ–∫—É—â–µ–µ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|---------|-------|-----------|
| **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ** | ~5% | ~2% | ‚¨áÔ∏è -60% |
| **–°–µ–ª–µ–∫—Ç–æ—Ä—ã Store** | 80+ —Å—Ç—Ä–æ–∫ | 20 —Å—Ç—Ä–æ–∫ | ‚¨áÔ∏è -75% |
| **–†–µ-—Ä–µ–Ω–¥–µ—Ä—ã** | Baseline | -30-50% | ‚ö° –ë—ã—Å—Ç—Ä–µ–µ |

---

## üèÅ –§–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### **‚úÖ –ú–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –°–ï–ô–ß–ê–°!**

–ü—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç **—Ö–æ—Ä–æ—à–∏–π —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç**:
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Store
- ‚úÖ –ß–∏—Å—Ç–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ Comprehensive –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ TypeScript –ø–æ–∫—Ä—ã—Ç–∏–µ 100%

### **üü° –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º:**

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å: –°—Ä–µ–¥–Ω—è—è (1-2 –¥–Ω—è —Ä–∞–±–æ—Ç—ã)**

1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ Store** (useShallow)
   - –£–ª—É—á—à–∏—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
   - –£–º–µ–Ω—å—à–∏—Ç boilerplate
   - –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç, –Ω–æ –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ

2. **–£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è EMA –ª–æ–≥–∏–∫–∏**
   - –£–ª—É—á—à–∏—Ç maintainability
   - –£–º–µ–Ω—å—à–∏—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç, –Ω–æ –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ

### **üîµ –ú–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å:**

3. **–†–∞–∑–±–∏—Ç—å habitUtils.ts** (–¥–µ–ª–∞—Ç—å –∫–æ–≥–¥–∞ >400 —Å—Ç—Ä–æ–∫)
4. **–£–ø—Ä–æ—Å—Ç–∏—Ç—å callbacks** (—Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å)
5. **–°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π** (overkill —Å–µ–π—á–∞—Å, –≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–∑–∂–µ)

---

## üé¨ –í—ã–≤–æ–¥

**–ü—Ä–æ–µ–∫—Ç –≤ –û–¢–õ–ò–ß–ù–û–ú —Å–æ—Å—Ç–æ—è–Ω–∏–∏! üéâ**

–í—ã —É–∂–µ –ø—Ä–æ–≤–µ–ª–∏ –±–æ–ª—å—à—É—é —Ä–∞–±–æ—Ç—É –ø–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É:
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Zustand —Å –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
- ‚úÖ Feature-based –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤  
- ‚úÖ Comprehensive –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ —Ç–∏–ø—ã

**–î–≤–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏** (useShallow + —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è EMA) –∑–∞–π–º—É—Ç **1-2 –¥–Ω—è**, –Ω–æ —ç—Ç–æ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ.

**–ú–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ–∏—á–∏ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å! üöÄ**

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 20 –Ω–æ—è–±—Ä—è 2025  
**–°–ª–µ–¥—É—é—â–∏–π –∞—É–¥–∏—Ç:** –ß–µ—Ä–µ–∑ 6 –º–µ—Å—è—Ü–µ–≤ –∏–ª–∏ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ 300 —Ñ–∞–π–ª–æ–≤