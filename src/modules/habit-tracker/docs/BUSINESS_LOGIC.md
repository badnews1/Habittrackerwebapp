# üéØ –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Ç—Ä–µ–∫–µ—Ä–∞ –ø—Ä–∏–≤—ã—á–µ–∫

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 22 –Ω–æ—è–±—Ä—è 2025  

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–°–∏—Å—Ç–µ–º–∞ "–°–∏–ª—ã –ø—Ä–∏–≤—ã—á–∫–∏" (EMA)](#—Å–∏—Å—Ç–µ–º–∞-—Å–∏–ª—ã-–ø—Ä–∏–≤—ã—á–∫–∏-ema)
2. [–¢–∏–ø—ã –ø—Ä–∏–≤—ã—á–µ–∫](#—Ç–∏–ø—ã-–ø—Ä–∏–≤—ã—á–µ–∫)
3. [–°–∏—Å—Ç–µ–º–∞ —á–∞—Å—Ç–æ—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è](#—Å–∏—Å—Ç–µ–º–∞-—á–∞—Å—Ç–æ—Ç—ã-–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)
4. [–ó–∞–º–æ—Ä–æ–∑–∫–∞ —Å–∏–ª—ã –ø—Ä–∏–≤—ã—á–∫–∏](#–∑–∞–º–æ—Ä–æ–∑–∫–∞-—Å–∏–ª—ã-–ø—Ä–∏–≤—ã—á–∫–∏)
5. [–ï–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è](#–µ–¥–∏–Ω–∏—Ü—ã-–∏–∑–º–µ—Ä–µ–Ω–∏—è)
6. [–†–∞—Å—á—ë—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞](#—Ä–∞—Å—á—ë—Ç-–ø—Ä–æ–≥—Ä–µ—Å—Å–∞)

---

##  –°–∏—Å—Ç–µ–º–∞ "–°–∏–ª—ã –ø—Ä–∏–≤—ã—á–∫–∏" (EMA)

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

**–°–∏–ª–∞ –ø—Ä–∏–≤—ã—á–∫–∏** ‚Äî –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –ø—Ä–∏–≤—ã—á–∫–∏ –æ—Ç 0 –¥–æ 100%, —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º—ã–π –ø–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É **Exponential Moving Average (EMA)**.

### –§–æ—Ä–º—É–ª–∞ EMA

```
N = 32 –¥–Ω—è (–ø–µ—Ä–∏–æ–¥ ~1 –º–µ—Å—è—Ü)
Œ± = 1/N = 1/32 ‚âà 0.03125

–°–∏–ª–∞(–¥–µ–Ω—å) = –°–∏–ª–∞(–¥–µ–Ω—å-1) √ó (1 - Œ±) + –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ(–¥–µ–Ω—å) √ó Œ±
```

**–ì–¥–µ:**
- `–°–∏–ª–∞(–¥–µ–Ω—å-1)` ‚Äî —Å–∏–ª–∞ –Ω–∞ –Ω–∞—á–∞–ª–æ –¥–Ω—è (0-100%)
- `–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ(–¥–µ–Ω—å)` ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞ –¥–µ–Ω—å (0-100%)
- `Œ±` ‚Äî –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è (—á–µ–º –º–µ–Ω—å—à–µ N, —Ç–µ–º –±—ã—Å—Ç—Ä–µ–µ —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è)

### –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—á—ë—Ç–∞

#### –ë–∏–Ω–∞—Ä–Ω–∞—è –ø—Ä–∏–≤—ã—á–∫–∞:

```
–î–µ–Ω—å 1: –°–∏–ª–∞ = 0 √ó 0.96875 + 100 √ó 0.03125 = 3.125%    ‚úì
–î–µ–Ω—å 2: –°–∏–ª–∞ = 3.125 √ó 0.96875 + 100 √ó 0.03125 = 6.15%  ‚úì
–î–µ–Ω—å 3: –°–∏–ª–∞ = 6.15 √ó 0.96875 + 0 √ó 0.03125 = 5.96%     ‚óã (–ø—Ä–æ–ø—É—Å–∫)
–î–µ–Ω—å 4: –°–∏–ª–∞ = 5.96 √ó 0.96875 + 100 √ó 0.03125 = 8.90%   ‚úì
...
–î–µ–Ω—å 32 (–ø–æ–ª–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ): –°–∏–ª–∞ ‚âà 63%
–î–µ–Ω—å 64 (–ø–æ–ª–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ): –°–∏–ª–∞ ‚âà 86%
–î–µ–Ω—å 96 (–ø–æ–ª–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ): –°–∏–ª–∞ ‚âà 95%
```

#### –ò–∑–º–µ—Ä–∏–º–∞—è –ø—Ä–∏–≤—ã—á–∫–∞ (—á–∞—Å—Ç–∏—á–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ):

```
–¶–µ–ª—å: –ü—Ä–æ–±–µ–∂–∞—Ç—å 5 –∫–º (targetType: 'min')

–î–µ–Ω—å 1: –ü—Ä–æ–±–µ–∂–∞–ª 5 –∫–º ‚Üí 100% ‚Üí –°–∏–ª–∞ = 0 √ó 0.96875 + 100 √ó 0.03125 = 3.125%
–î–µ–Ω—å 2: –ü—Ä–æ–±–µ–∂–∞–ª 3 –∫–º ‚Üí 60% ‚Üí –°–∏–ª–∞ = 3.125 √ó 0.96875 + 60 √ó 0.03125 = 4.90%
–î–µ–Ω—å 3: –ü—Ä–æ–±–µ–∂–∞–ª 4.5 –∫–º ‚Üí 90% ‚Üí –°–∏–ª–∞ = 4.90 √ó 0.96875 + 90 √ó 0.03125 = 7.56%
–î–µ–Ω—å 4: –ü—Ä–æ–±–µ–∂–∞–ª 6 –∫–º ‚Üí 100% (max) ‚Üí –°–∏–ª–∞ = 7.56 √ó 0.96875 + 100 √ó 0.03125 = 10.45%
```

**–í–∞–∂–Ω–æ:** –ü–µ—Ä–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ü–µ–ª–∏ –Ω–µ –¥–∞—ë—Ç –±–æ–Ω—É—Å–∞ ‚Äî –º–∞–∫—Å–∏–º—É–º 100% –∑–∞ –¥–µ–Ω—å.

### –ü–æ—Ä–æ–≥–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å–∏–ª—ã

```typescript
0-33%:   üî¥ –°–ª–∞–±–∞—è –ø—Ä–∏–≤—ã—á–∫–∞
34-66%:  üü° –°—Ä–µ–¥–Ω—è—è –ø—Ä–∏–≤—ã—á–∫–∞
67-100%: üü¢ –°–∏–ª—å–Ω–∞—è –ø—Ä–∏–≤—ã—á–∫–∞
```

**–§–∞–π–ª:** `/shared/constants/colors.ts` ‚Üí `STRENGTH_THRESHOLDS`

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ—Å—á—ë—Ç–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å —Å–∏–ª—É —Å –Ω–∞—á–∞–ª–∞ –≤—Ä–µ–º—ë–Ω –∫–∞–∂–¥—ã–π —Ä–∞–∑ –¥–æ—Ä–æ–≥–æ.

**–†–µ—à–µ–Ω–∏–µ:** –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ—Å—á—ë—Ç —Å baseline:

```typescript
interface Habit {
  strength: number;              // –¢–µ–∫—É—â–∞—è —Å–∏–ª–∞
  lastStrengthUpdate: string;    // –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–æ–ª–Ω–æ–≥–æ –ø–µ—Ä–µ—Å—á—ë—Ç–∞
  strengthBaseline: number;      // –°–∏–ª–∞ –Ω–∞ –Ω–∞—á–∞–ª–æ —Ç–µ–∫—É—â–µ–≥–æ –¥–Ω—è
}
```

**–õ–æ–≥–∏–∫–∞:**
1. **–ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Å—á—ë—Ç** (–Ω–æ–≤—ã–π –¥–µ–Ω—å –ò–õ–ò –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –¥–Ω–µ–π):
   - –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –æ—Ç —Å–∞–º–æ–π —Ä–∞–Ω–Ω–µ–π –≥–∞–ª–æ—á–∫–∏ –¥–æ —Å–µ–≥–æ–¥–Ω—è
   - –°–æ—Ö—Ä–∞–Ω—è–µ–º `strengthBaseline` = —Å–∏–ª–∞ –Ω–∞ –Ω–∞—á–∞–ª–æ —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–≥–æ –¥–Ω—è
   - –û–±–Ω–æ–≤–ª—è–µ–º `lastStrengthUpdate` = —Å–µ–≥–æ–¥–Ω—è

2. **–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ—Å—á—ë—Ç** (–∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –≤ —Ç–µ–∫—É—â–µ–º –¥–Ω–µ):
   - –ù–∞—á–∏–Ω–∞–µ–º —Å `strengthBaseline`
   - –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –¥–µ–Ω—å
   - –ù–ï –æ–±–Ω–æ–≤–ª—è–µ–º `lastStrengthUpdate`

**–§–∞–π–ª:** `/modules/habit-tracker/features/strength/utils/strengthCalculator.ts` ‚Üí `recalculateStrength()`

### –û—Å–æ–±—ã–µ —Å–ª—É—á–∞–∏

#### 1. –ë—É–¥—É—â–∏–µ –¥–Ω–∏
–ì–∞–ª–æ—á–∫–∏ –≤ –±—É–¥—É—â–µ–º **–ù–ï –≤–ª–∏—è—é—Ç** –Ω–∞ —Å–∏–ª—É –ø—Ä–∏–≤—ã—á–∫–∏.

```typescript
// –°–µ–≥–æ–¥–Ω—è: 2025-11-20
completions: {
  "2025-11-19": true,  // ‚úÖ –£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è
  "2025-11-20": true,  // ‚úÖ –£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è (—Å–µ–≥–æ–¥–Ω—è)
  "2025-11-21": true,  // ‚ùå –ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è (–±—É–¥—É—â–µ–µ)
}
```

#### 2. –ì–∞–ª–æ—á–∫–∏ –¥–æ –¥–∞—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è
–ï—Å–ª–∏ –µ—Å—Ç—å –≥–∞–ª–æ—á–∫–∞ —Ä–∞–Ω—å—à–µ `createdAt`, –ø–µ—Ä–µ—Å—á—ë—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –Ω–µ—ë.

```typescript
createdAt: "2025-11-15"
completions: {
  "2025-11-10": true,  // ‚úÖ –£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è (—Ä–∞–Ω—å—à–µ —Å–æ–∑–¥–∞–Ω–∏—è)
}
// –ü–µ—Ä–µ—Å—á—ë—Ç –Ω–∞—á–Ω—ë—Ç—Å—è —Å 2025-11-10
```

---

## üìä –¢–∏–ø—ã –ø—Ä–∏–≤—ã—á–µ–∫

### 1. –ë–∏–Ω–∞—Ä–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏ (Binary)

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è:** –í—ã–ø–æ–ª–Ω–µ–Ω–æ ‚úì –∏–ª–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ ‚óã

**–ü—Ä–∏–º–µ—Ä—ã:**
- –ü—Ä–æ—á–∏—Ç–∞–ª –∫–Ω–∏–≥—É
- –°–¥–µ–ª–∞–ª –∑–∞—Ä—è–¥–∫—É
- –ü–æ–º–µ–¥–∏—Ç–∏—Ä–æ–≤–∞–ª
- –£–±—Ä–∞–ª –∫—Ä–æ–≤–∞—Ç—å

**–î–∞–Ω–Ω—ã–µ:**
```typescript
type: 'binary'
completions: {
  "2025-11-20": true,   // ‚úì –í—ã–ø–æ–ª–Ω–µ–Ω–æ
  "2025-11-19": false,  // ‚óã –ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ (–∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)
}
```

**–†–∞—Å—á—ë—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
```typescript
–í—ã–ø–æ–ª–Ω–µ–Ω–æ (true)  ‚Üí 100%
–ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ      ‚Üí 0%
```

**–§–∞–π–ª:** `/modules/habit-tracker/features/habits/utils/habitUtils.ts` ‚Üí `getCompletionValueForDate()`

---

### 2. –ò–∑–º–µ—Ä–∏–º—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏ (Measurable)

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è:** –ü—Ä–∏–≤—ã—á–∫–∞ —Å —á–∏—Å–ª–æ–≤—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º –∏ —Ü–µ–ª—å—é

**–ü—Ä–∏–º–µ—Ä—ã:**
- –ü—Ä–æ–±–µ–∂–∞–ª 5 –∫–º
- –í—ã–ø–∏–ª 2 –ª–∏—Ç—Ä–∞ –≤–æ–¥—ã
- –ü—Ä–æ—á–∏—Ç–∞–ª 20 —Å—Ç—Ä–∞–Ω–∏—Ü
- –°—ç–∫–æ–Ω–æ–º–∏–ª 500 —Ä—É–±–ª–µ–π

**–î–∞–Ω–Ω—ã–µ:**
```typescript
type: 'measurable'
unit: '–∫–∏–ª–æ–º–µ—Ç—Ä—ã'        // –ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è
targetValue: 5           // –¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
targetType: 'min' | 'max' // –¢–∏–ø —Ü–µ–ª–∏

completions: {
  "2025-11-20": 4.5,     // –ß–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
  "2025-11-19": 6,
}
```

### –¢–∏–ø—ã —Ü–µ–ª–µ–π –¥–ª—è –∏–∑–º–µ—Ä–∏–º—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫

#### A) `targetType: 'min'` ‚Äî "–ù–µ –º–µ–Ω—å—à–µ" (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ **–¥–æ—Å—Ç–∏—á—å –º–∏–Ω–∏–º—É–º–∞**

**–ü—Ä–∏–º–µ—Ä—ã:**
- –ü—Ä–æ–±–µ–∂–∞—Ç—å –Ω–µ –º–µ–Ω—å—à–µ 5 –∫–º
- –ü—Ä–æ—á–∏—Ç–∞—Ç—å –Ω–µ –º–µ–Ω—å—à–µ 20 —Å—Ç—Ä–∞–Ω–∏—Ü
- –í—ã–ø–∏—Ç—å –Ω–µ –º–µ–Ω—å—à–µ 2 –ª–∏—Ç—Ä–æ–≤ –≤–æ–¥—ã

**–†–∞—Å—á—ë—Ç –ø—Ä–æ—Ü–µ–Ω—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
```typescript
if (targetValue === 0 || !targetValue) {
  return value > 0 ? 100 : 0;
}

// –ü—Ä–æ–ø–æ—Ä—Ü–∏—è –æ—Ç 0 –¥–æ 100, –Ω–æ –Ω–µ –±–æ–ª—å—à–µ 100
const proportion = (value / targetValue) * 100;
return Math.min(proportion, 100);
```

**–ü—Ä–∏–º–µ—Ä—ã:**
```
–¶–µ–ª—å: 10 –∫–º

3 –∫–º   ‚Üí 30%  (—á–∞—Å—Ç–∏—á–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è)
9 –∫–º   ‚Üí 90%  (–ø–æ—á—Ç–∏ –¥–æ—Å—Ç–∏–≥–ª–∏)
10 –∫–º  ‚Üí 100% (—Ü–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞)
15 –∫–º  ‚Üí 100% (–ø–µ—Ä–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–µ –¥–∞—ë—Ç –±–æ–Ω—É—Å–∞)
```

---

#### B) `targetType: 'max'` ‚Äî "–ù–µ –±–æ–ª—å—à–µ"

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ **–ù–ï –ø—Ä–µ–≤—ã—à–∞—Ç—å –ª–∏–º–∏—Ç**

**–ü—Ä–∏–º–µ—Ä—ã:**
- –í—ã–∫—É—Ä–∏—Ç—å –Ω–µ –±–æ–ª—å—à–µ 5 —Å–∏–≥–∞—Ä–µ—Ç
- –°—ä–µ—Å—Ç—å –Ω–µ –±–æ–ª—å—à–µ 2000 –∫–∞–ª–æ—Ä–∏–π
- –ü–æ—Ç—Ä–∞—Ç–∏—Ç—å –Ω–µ –±–æ–ª—å—à–µ 1000 —Ä—É–±–ª–µ–π

**–†–∞—Å—á—ë—Ç –ø—Ä–æ—Ü–µ–Ω—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
```typescript
if (value <= targetValue) {
  return 100; // –í –ø—Ä–µ–¥–µ–ª–∞—Ö –ª–∏–º–∏—Ç–∞ ‚Äî –æ—Ç–ª–∏—á–Ω–æ!
}

// –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ ‚Äî —à—Ç—Ä–∞—Ñ
const excess = value - targetValue;
const penalty = (excess / targetValue) * 100;
return Math.max(100 - penalty, 0);
```

**–ü—Ä–∏–º–µ—Ä—ã:**
```
–¶–µ–ª—å: –Ω–µ –±–æ–ª—å—à–µ 5 —Å–∏–≥–∞—Ä–µ—Ç

0 —Å–∏–≥–∞—Ä–µ—Ç  ‚Üí 100% (–æ—Ç–ª–∏—á–Ω–æ!)
3 —Å–∏–≥–∞—Ä–µ—Ç—ã ‚Üí 100% (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ª–∏–º–∏—Ç–∞)
5 —Å–∏–≥–∞—Ä–µ—Ç  ‚Üí 100% (–Ω–∞ –≥—Ä–∞–Ω–∏—Ü–µ –ª–∏–º–∏—Ç–∞)
7.5 —Å–∏–≥–∞—Ä–µ—Ç ‚Üí 50%  (–ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –Ω–∞ 50% ‚Üí —à—Ç—Ä–∞—Ñ 50%)
10 —Å–∏–≥–∞—Ä–µ—Ç  ‚Üí 0%   (–ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –Ω–∞ 100% ‚Üí —à—Ç—Ä–∞—Ñ 100%)
15 —Å–∏–≥–∞—Ä–µ—Ç  ‚Üí 0%   (–ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ > 100% ‚Üí –º–∏–Ω–∏–º—É–º 0%)
```

**–§–∞–π–ª:** `/modules/habit-tracker/features/habits/utils/habitUtils.ts` ‚Üí `isHabitCompletedForDate()`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (isCompleted)

**–ë–∏–Ω–∞—Ä–Ω—ã–µ:**
```typescript
isCompleted = (completions[date] === true)
```

**–ò–∑–º–µ—Ä–∏–º—ã–µ:**
```typescript
if (targetType === 'min') {
  isCompleted = (value >= targetValue)
}
if (targetType === 'max') {
  isCompleted = (value <= targetValue)
}
```

**–§–∞–π–ª:** `/modules/habit-tracker/features/habits/utils/habitUtils.ts` ‚Üí `isHabitCompletedForDate()`

---

## üìÖ –°–∏—Å—Ç–µ–º–∞ —á–∞—Å—Ç–æ—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –¢–∏–ø—ã —á–∞—Å—Ç–æ—Ç—ã

#### 1. `daily` ‚Äî –ö–∞–∂–¥—ã–π –¥–µ–Ω—å

```typescript
frequency: { type: 'daily' }
```

**–û–∂–∏–¥–∞–Ω–∏–µ:** –í—ã–ø–æ–ª–Ω—è—Ç—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å  
**–¶–µ–ª—å –∑–∞ –º–µ—Å—è—Ü:** 30 –¥–Ω–µ–π (–≤—Å–µ –¥–Ω–∏ –º–µ—Å—è—Ü–∞)

---

#### 2. `every_n_days` ‚Äî –ö–∞–∂–¥—ã–µ N –¥–Ω–µ–π

```typescript
frequency: { 
  type: 'every_n_days',
  period: 3  // –ö–∞–∂–¥—ã–µ 3 –¥–Ω—è
}
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- –ö–∞–∂–¥—ã–µ 2 –¥–Ω—è (—á–µ—Ä–µ–∑ –¥–µ–Ω—å)
- –ö–∞–∂–¥—ã–µ 5 –¥–Ω–µ–π

**–¶–µ–ª—å –∑–∞ –º–µ—Å—è—Ü:**
```typescript
Math.floor(daysInMonth / period)

–ü—Ä–∏–º–µ—Ä (30 –¥–Ω–µ–π, –∫–∞–∂–¥—ã–µ 3 –¥–Ω—è):
Math.floor(30 / 3) = 10 –¥–Ω–µ–π
```

---

#### 3. `n_times_week` ‚Äî N —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é

```typescript
frequency: { 
  type: 'n_times_week',
  count: 3  // 3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é
}
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- 3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é
- 5 —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é

**–¶–µ–ª—å –∑–∞ –º–µ—Å—è—Ü:**
```typescript
const weeksInMonth = daysInMonth / 7;
Math.round(count * weeksInMonth)

–ü—Ä–∏–º–µ—Ä (30 –¥–Ω–µ–π, 3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é):
30 / 7 ‚âà 4.29 –Ω–µ–¥–µ–ª—å
3 √ó 4.29 ‚âà 13 –¥–Ω–µ–π
```

---

#### 4. `n_times_month` ‚Äî N —Ä–∞–∑ –≤ –º–µ—Å—è—Ü

```typescript
frequency: { 
  type: 'n_times_month',
  count: 10  // 10 —Ä–∞–∑ –≤ –º–µ—Å—è—Ü
}
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- 5 —Ä–∞–∑ –≤ –º–µ—Å—è—Ü
- 15 —Ä–∞–∑ –≤ –º–µ—Å—è—Ü

**–¶–µ–ª—å –∑–∞ –º–µ—Å—è—Ü:**
```typescript
return count;

–ü—Ä–∏–º–µ—Ä: 10 —Ä–∞–∑ –≤ –º–µ—Å—è—Ü ‚Üí —Ü–µ–ª—å = 10 –¥–Ω–µ–π
```

---

#### 5. `n_times_in_m_days` ‚Äî N —Ä–∞–∑ –≤ M –¥–Ω–µ–π

```typescript
frequency: { 
  type: 'n_times_in_m_days',
  count: 3,   // 3 —Ä–∞–∑–∞
  period: 7   // –≤ 7 –¥–Ω–µ–π
}
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- 3 —Ä–∞–∑–∞ –≤ 7 –¥–Ω–µ–π (–ø–æ—á—Ç–∏ –∫–∞–∫ 3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é, –Ω–æ —Å—Ç—Ä–æ–∂–µ)
- 5 —Ä–∞–∑ –≤ 14 –¥–Ω–µ–π

**–¶–µ–ª—å –∑–∞ –º–µ—Å—è—Ü:**
```typescript
const periodsInMonth = daysInMonth / period;
Math.round(count * periodsInMonth)

–ü—Ä–∏–º–µ—Ä (30 –¥–Ω–µ–π, 3 —Ä–∞–∑–∞ –≤ 7 –¥–Ω–µ–π):
30 / 7 ‚âà 4.29 –ø–µ—Ä–∏–æ–¥–æ–≤
3 √ó 4.29 ‚âà 13 –¥–Ω–µ–π
```

---

#### 6. `by_days_of_week` ‚Äî –ü–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏

```typescript
frequency: { 
  type: 'by_days_of_week',
  daysOfWeek: [0, 2, 4]  // –ü–Ω, –°—Ä, –ü—Ç
}
```

**–ì–¥–µ:**
- `0` = –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫
- `1` = –í—Ç–æ—Ä–Ω–∏–∫
- `2` = –°—Ä–µ–¥–∞
- `3` = –ß–µ—Ç–≤–µ—Ä–≥
- `4` = –ü—è—Ç–Ω–∏—Ü–∞
- `5` = –°—É–±–±–æ—Ç–∞
- `6` = –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ

**–ü—Ä–∏–º–µ—Ä—ã:**
- `[0, 2, 4]` ‚Äî –ü–Ω, –°—Ä, –ü—Ç (3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é)
- `[5, 6]` ‚Äî –°–±, –í—Å (–≤—ã—Ö–æ–¥–Ω—ã–µ)
- `[0, 1, 2, 3, 4]` ‚Äî –ë—É–¥–Ω–∏

**–¶–µ–ª—å –∑–∞ –º–µ—Å—è—Ü (—Ç–æ—á–Ω—ã–π —Ä–∞—Å—á—ë—Ç):**
```typescript
// –î–ª—è –∫–∞–∂–¥–æ–≥–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –¥–Ω—è —Å—á–∏—Ç–∞–µ–º —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –æ–Ω –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –≤ –º–µ—Å—è—Ü–µ
let totalDays = 0;
selectedDays.forEach(dayOfWeek => {
  // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º: 0=–ü–Ω –≤ JS 0=–í—Å
  const targetDay = dayOfWeek === 6 ? 0 : dayOfWeek + 1;
  
  for (let day = 1; day <= daysInMonth; day++) {
    const date = new Date(year, month, day);
    if (date.getDay() === targetDay) {
      occurrences++;
    }
  }
  totalDays += occurrences;
});
return totalDays;
```

**–ü—Ä–∏–º–µ—Ä (–Ω–æ—è–±—Ä—å 2025, –ü–Ω/–°—Ä/–ü—Ç):**
- –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–æ–≤: 4
- –°—Ä–µ–¥: 4
- –ü—è—Ç–Ω–∏—Ü: 4
- **–ò—Ç–æ–≥–æ: 12 –¥–Ω–µ–π**

**–§–∞–π–ª:** `/modules/habit-tracker/features/habits/utils/habitUtils.ts` ‚Üí `getMonthlyGoalFromFrequency()`

---

## ‚ùÑÔ∏è –ó–∞–º–æ—Ä–æ–∑–∫–∞ —Å–∏–ª—ã –ø—Ä–∏–≤—ã—á–∫–∏

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

**–ó–∞–º–æ—Ä–æ–∑–∫–∞ (‚úó)** ‚Äî –Ω–∞–º–µ—Ä–µ–Ω–Ω—ã–π –ø—Ä–æ–ø—É—Å–∫, –∫–æ—Ç–æ—Ä—ã–π **–ù–ï —Å–Ω–∏–∂–∞–µ—Ç** —Å–∏–ª—É –ø—Ä–∏–≤—ã—á–∫–∏.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –û—Ç–ø—É—Å–∫
- –ë–æ–ª–µ–∑–Ω—å
- –í—ã—Ö–æ–¥–Ω—ã–µ (–¥–ª—è —Ä–∞–±–æ—á–∏—Ö –ø—Ä–∏–≤—ã—á–µ–∫)
- –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–µ—Ä–µ—Ä—ã–≤

### –ú–µ—Ö–∞–Ω–∏–∫–∞

**–û–±—ã—á–Ω—ã–π –ø—Ä–æ–ø—É—Å–∫ (‚óã):**
```typescript
–°–∏–ª–∞ = –°–∏–ª–∞ √ó 0.96875 + 0 √ó 0.03125
// –°–∏–ª–∞ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –Ω–∞ ~3% –≤ –¥–µ–Ω—å
```

**–ó–∞–º–æ—Ä–æ–∑–∫–∞ (‚úó):**
```typescript
if (habit.skipped[date] === true) {
  // –°–∏–ª–∞ –ù–ï –º–µ–Ω—è–µ—Ç—Å—è, –¥–µ–Ω—å –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è
  return strength; // –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
}
```

### –ü—Ä–∏–º–µ—Ä

```
–°–∏–ª–∞ –Ω–∞ –Ω–∞—á–∞–ª–æ –Ω–µ–¥–µ–ª–∏: 80%

–ü–Ω: ‚úì –í—ã–ø–æ–ª–Ω–µ–Ω–æ ‚Üí 80.625%
–í—Ç: ‚úó –ó–∞–º–æ—Ä–æ–∑–∫–∞ ‚Üí 80.625% (–Ω–µ –º–µ–Ω—è–µ—Ç—Å—è!)
–°—Ä: ‚óã –ü—Ä–æ–ø—É—Å–∫   ‚Üí 78.105% (—Å–Ω–∏–∑–∏–ª–∞—Å—å)
–ß—Ç: ‚úì –í—ã–ø–æ–ª–Ω–µ–Ω–æ ‚Üí 78.750%
–ü—Ç: ‚úó –ó–∞–º–æ—Ä–æ–∑–∫–∞ ‚Üí 78.750% (–Ω–µ –º–µ–Ω—è–µ—Ç—Å—è!)
```

### –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

```typescript
interface Habit {
  completions: {
    "2025-11-20": true,   // ‚úì –í—ã–ø–æ–ª–Ω–µ–Ω–æ
    "2025-11-19": 5,      // –ß–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (measurable)
  },
  skipped: {
    "2025-11-18": true,   // ‚úó –ó–∞–º–æ—Ä–æ–∑–∫–∞
  }
}
```

**–í–∞–∂–Ω–æ:**
- `completions` –∏ `skipped` ‚Äî **–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –æ–±—ä–µ–∫—Ç—ã**
- –î–µ–Ω—å –º–æ–∂–µ—Ç –±—ã—Ç—å –ª–∏–±–æ completed, –ª–∏–±–æ skipped, –ª–∏–±–æ –ø—É—Å—Ç–æ–π (–ø—Ä–æ–ø—É—Å–∫)
- –ï—Å–ª–∏ `skipped[date] === true`, –∑–Ω–∞—á–µ–Ω–∏–µ `completions[date]` –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è

**–§–∞–π–ª:** `/modules/habit-tracker/features/strength/utils/strengthCalculator.ts` ‚Üí `recalculateStrength()`

---

## üìè –ï–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è

### –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ (22 –µ–¥–∏–Ω–∏—Ü—ã)

```typescript
// –°—á—ë—Ç–Ω—ã–µ
'—Ä–∞–∑—ã'      // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑
'—à—Ç—É–∫–∏'     // –®—Ç—É–∫–∏
'–±–∞–ª–ª—ã'     // –ë–∞–ª–ª—ã (—Ä–µ–π—Ç–∏–Ω–≥)

// –í—Ä–µ–º—è
'–º–∏–Ω—É—Ç—ã'
'—á–∞—Å—ã'

// –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –∏ –¥–≤–∏–∂–µ–Ω–∏–µ
'—à–∞–≥–∏'
'–∫–∏–ª–æ–º–µ—Ç—Ä—ã'
'–º–µ—Ç—Ä—ã'
'–ø–æ–¥—Ö–æ–¥—ã'   // –ü–æ–¥—Ö–æ–¥—ã –≤ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ

// –ó–¥–æ—Ä–æ–≤—å–µ –∏ –ø–∏—Ç–∞–Ω–∏–µ
'–∫–∞–ª–æ—Ä–∏–∏'
'–∫–∏–ª–æ–≥—Ä–∞–º–º—ã'
'–≥—Ä–∞–º–º—ã'
'—Å—Ç–∞–∫–∞–Ω—ã'
'–ª–∏—Ç—Ä—ã'
'–º–∏–ª–∏–ª–∏—Ç—Ä—ã'
'–ø–æ—Ä—Ü–∏–∏'
'—á–∞—à–∫–∏'

// –ß—Ç–µ–Ω–∏–µ –∏ –æ–±—É—á–µ–Ω–∏–µ
'—Å—Ç—Ä–∞–Ω–∏—Ü—ã'
'—Å–ª–æ–≤–∞'
'–≥–ª–∞–≤—ã'
'–∑–∞–¥–∞—á–∏'

// –í–∞–ª—é—Ç–∞
'—Ä—É–±.'
'$'
'‚Ç¨'
```

**–§–∞–π–ª:** `/modules/habit-tracker/shared/constants/units.ts` ‚Üí `UNIT_OPTIONS`

### –°–∫–ª–æ–Ω–µ–Ω–∏–µ –µ–¥–∏–Ω–∏—Ü

**–§—É–Ω–∫—Ü–∏—è:** `declineUnit(value, unit)`

**–ü—Ä–∞–≤–∏–ª–∞:**
```typescript
// –¶–µ–ª—ã–µ —á–∏—Å–ª–∞
1    ‚Üí —Ä–∞–∑,  –∫–∏–ª–æ–º–µ—Ç—Ä,  —Å—Ç—Ä–∞–Ω–∏—Ü–∞
2-4  ‚Üí —Ä–∞–∑–∞, –∫–∏–ª–æ–º–µ—Ç—Ä–∞, —Å—Ç—Ä–∞–Ω–∏—Ü—ã
5-20 ‚Üí —Ä–∞–∑,  –∫–∏–ª–æ–º–µ—Ç—Ä–æ–≤, —Å—Ç—Ä–∞–Ω–∏—Ü

// –î—Ä–æ–±–Ω—ã–µ —á–∏—Å–ª–∞ (–≤—Å–µ–≥–¥–∞ —Ñ–æ—Ä–º–∞ 2)
1.5  ‚Üí –ª–∏—Ç—Ä–∞
2.5  ‚Üí –∫–∏–ª–æ–≥—Ä–∞–º–º–∞
0.5  ‚Üí —á–∞—Å–∞
```

**–ü—Ä–∏–º–µ—Ä—ã:**
```typescript
declineUnit(1, '—Ä–∞–∑—ã')        // "—Ä–∞–∑"
declineUnit(2, '—Ä–∞–∑—ã')        // "—Ä–∞–∑–∞"
declineUnit(5, '—Ä–∞–∑—ã')        // "—Ä–∞–∑"
declineUnit(1.5, '–ª–∏—Ç—Ä—ã')     // "–ª–∏—Ç—Ä–∞"
declineUnit(21, '—Å—Ç—Ä–∞–Ω–∏—Ü—ã')   // "—Å—Ç—Ä–∞–Ω–∏—Ü–∞" (21 = 1 –≤ –∫–æ–Ω—Ü–µ)
declineUnit(22, '—Å—Ç—Ä–∞–Ω–∏—Ü—ã')   // "—Å—Ç—Ä–∞–Ω–∏—Ü—ã" (22 = 2 –≤ –∫–æ–Ω—Ü–µ)
```

**–§–∞–π–ª:** `/shared/utils/text/textUtils.ts` ‚Üí `declineUnit()`

### –°–æ–∫—Ä–∞—â–µ–Ω–∏—è –¥–ª—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è

```typescript
'–∫–∏–ª–æ–º–µ—Ç—Ä—ã' ‚Üí '–∫–º'
'–ª–∏—Ç—Ä—ã'     ‚Üí '–ª'
'–º–∏–Ω—É—Ç—ã'    ‚Üí '–º–∏–Ω'
'—Å—Ç—Ä–∞–Ω–∏—Ü—ã'  ‚Üí '—Å—Ç—Ä'
'–∫–∞–ª–æ—Ä–∏–∏'   ‚Üí '–∫–∫–∞–ª'
```

**–§–∞–π–ª:** `/shared/utils/text/textUtils.ts` ‚Üí `getShortUnit()`

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ–ª—å—à–∏—Ö —á–∏—Å–µ–ª

```typescript
formatNumber(999)     // "999"
formatNumber(10000)   // "10k"
formatNumber(15500)   // "15.5k"
formatNumber(100000)  // "100k"
formatNumber(1500000) // "1.5M"
```

**–§–∞–π–ª:** `/shared/utils/text/textUtils.ts` ‚Üí `formatNumber()`

---

## üìà –†–∞—Å—á—ë—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

### –ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞ –º–µ—Å—è—Ü

**–§–æ—Ä–º—É–ª–∞:**
```typescript
const completed = Object.values(completions).filter(isCompleted).length;
const goal = getMonthlyGoalFromFrequency(frequency, daysInMonth, month, year);
const percentage = Math.round((completed / goal) * 100);
```

**–ü—Ä–∏–º–µ—Ä:**
```
–ß–∞—Å—Ç–æ—Ç–∞: 3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é
–î–Ω–µ–π –≤ –º–µ—Å—è—Ü–µ: 30
–¶–µ–ª—å: ~13 –¥–Ω–µ–π

–í—ã–ø–æ–ª–Ω–µ–Ω–æ: 10 –¥–Ω–µ–π
–ü—Ä–æ–≥—Ä–µ—Å—Å: (10 / 13) √ó 100 = 77%
```

### –°–µ—Ä–∏—è (Streak)

**–¢–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è** ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥ —Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º (–≤–∫–ª—é—á–∞—è –∑–∞–º–æ—Ä–æ–∑–∫–∏).

**–õ–æ–≥–∏–∫–∞:**
```typescript
let streak = 0;
for (let i = 0; i < 365; i++) {  // –°–º–æ—Ç—Ä–∏–º –Ω–∞–∑–∞–¥ –¥–æ 1 –≥–æ–¥–∞
  const date = today - i –¥–Ω–µ–π;
  
  if (completions[date] || skipped[date]) {
    streak++;
  } else {
    break; // –ü—Ä–µ—Ä–≤–∞–ª–∏ —Å–µ—Ä–∏—é
  }
}
```

**–ü—Ä–∏–º–µ—Ä:**
```
20.11: ‚úì (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ)
19.11: ‚úó (–∑–∞–º–æ—Ä–æ–∑–∫–∞)    ‚Üê —Å—á–∏—Ç–∞–µ—Ç—Å—è!
18.11: ‚úì (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ)
17.11: ‚óã (–ø—Ä–æ–ø—É—Å–∫)      ‚Üê —Å–µ—Ä–∏—è –ø—Ä–µ—Ä–≤–∞–ª–∞—Å—å

–¢–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è: 3 –¥–Ω—è
```

---

## üîç –û—Å–æ–±—ã–µ —Å–ª—É—á–∞–∏ –∏ Edge Cases

### 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–µ—Å—è—Ü

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–∏–ª–∞ –¥–æ–ª–∂–Ω–∞ —É–ø–∞—Å—Ç—å –∑–∞ –≤—Å–µ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –¥–Ω–∏.

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º —Å–∏–ª—É –æ—Ç `lastStrengthUpdate` –¥–æ —Å–µ–≥–æ–¥–Ω—è:

```typescript
if (lastStrengthUpdate < today) {
  // –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Å—á—ë—Ç –æ—Ç lastStrengthUpdate –¥–æ —Å–µ–≥–æ–¥–Ω—è
  habit = recalculateStrength(habit);
}
```

### 2. –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–π –≥–∞–ª–æ—á–∫–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** –ò–∑–º–µ–Ω–∏–ª –≥–∞–ª–æ—á–∫—É –Ω–µ–¥–µ–ª—é –Ω–∞–∑–∞–¥ ‚Äî –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å –≤—Å—ë.

**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Å—á—ë—Ç –æ—Ç —Å–∞–º–æ–π —Ä–∞–Ω–Ω–µ–π –≥–∞–ª–æ—á–∫–∏:

```typescript
if (changedDate < lastStrengthUpdate) {
  // –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Å—á—ë—Ç –æ—Ç –Ω–∞—á–∞–ª–∞
  return recalculateStrength(habit);
}
```

### 3. –°–∏–ª–∞ —É—Ö–æ–¥–∏—Ç –≤ –º–∏–Ω—É—Å –∏–ª–∏ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 100

**–†–µ—à–µ–Ω–∏–µ:** –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–∏–∞–ø–∞–∑–æ–Ω 0-100:

```typescript
strength = Math.max(0, Math.min(100, strength));
```

### 4. –ß–∞—Å—Ç–æ—Ç–∞ "3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é" ‚Äî —Å–¥–µ–ª–∞–ª –≤—Å–µ 3 –≤ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫

**–í–æ–ø—Ä–æ—Å:** –≠—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –Ω–∞ –≤—Å—é –Ω–µ–¥–µ–ª—é?

**–û—Ç–≤–µ—Ç:** **–ù–ï–¢**. –°–∏—Å—Ç–µ–º–∞ –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç "–∫–≤–æ—Ç—ã –Ω–∞ –Ω–µ–¥–µ–ª—é", —Ç–æ–ª—å–∫–æ —Ñ–∞–∫—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–µ–Ω—å.

- –ï—Å–ª–∏ –ø—Ä–∏–≤—ã—á–∫–∞ —Ç—Ä–µ–±—É–µ—Ç 3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `by_days_of_week` –¥–ª—è —Å—Ç—Ä–æ–≥–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è.
- `n_times_week` ‚Äî —ç—Ç–æ **–≥–∏–±–∫–∞—è** —á–∞—Å—Ç–æ—Ç–∞ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ —Ü–µ–ª–∏, –Ω–æ –Ω–µ –∂—ë—Å—Ç–∫–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ.

### 5. Emoji –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ –ø—Ä–∏–≤—ã—á–∫–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** Emoji —Å—á–∏—Ç–∞–µ—Ç—Å—è –∫–∞–∫ 2+ —Å–∏–º–≤–æ–ª–∞ –≤ JavaScript.

**–†–µ—à–µ–Ω–∏–µ:** –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ –≤–∏–∑—É–∞–ª—å–Ω–æ–π –¥–ª–∏–Ω–µ:

```typescript
// –ò—Å–ø–æ–ª—å–∑—É–µ–º Array.from() –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ–¥—Å—á—ë—Ç–∞ —Å–∏–º–≤–æ–ª–æ–≤
const visualLength = Array.from(name).length;
if (visualLength > 25) {
  return '–ù–∞–∑–≤–∞–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ (–º–∞–∫—Å. 25 —Å–∏–º–≤–æ–ª–æ–≤)';
}
```

**–§–∞–π–ª:** `/shared/constants/validation.ts`

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### üéØ –ú–æ–¥—É–ª—å habit-tracker

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã:**
- `/modules/habit-tracker/types/index.ts` ‚Äî Habit, HabitData, HabitType, FrequencyConfig, Reminder, MeasurableSettings

**–§–∏—á–∞: habits (CRUD –ø—Ä–∏–≤—ã—á–µ–∫)**
- `/modules/habit-tracker/features/habits/utils/habitUtils.ts` ‚Äî getCompletionValueForDate(), isHabitCompletedForDate(), getMonthlyGoalFromFrequency(), formatFrequency()
- `/modules/habit-tracker/features/habits/components/` ‚Äî HabitRow, HabitsTable, AddHabitModal, ManageHabitsModal

**–§–∏—á–∞: strength (–°–∏–ª–∞ –ø—Ä–∏–≤—ã—á–∫–∏)**
- `/modules/habit-tracker/features/strength/utils/strengthCalculator.ts` ‚Äî recalculateStrength(), getStrengthColor()
- `/modules/habit-tracker/features/strength/utils/strengthHistory.ts` ‚Äî calculateStrengthHistory()
- `/modules/habit-tracker/shared/constants/strength.ts` ‚Äî EMA_PERIOD, EMA_ALPHA

**–§–∏—á–∞: frequency (–ß–∞—Å—Ç–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)**
- `/modules/habit-tracker/features/frequency/components/FrequencyEditor.tsx` ‚Äî –†–µ–¥–∞–∫—Ç–æ—Ä —á–∞—Å—Ç–æ—Ç—ã
- `/modules/habit-tracker/features/frequency/utils/frequencyValidation.ts` ‚Äî –í–∞–ª–∏–¥–∞—Ü–∏—è count –∏ period

**–§–∏—á–∞: categories (–ö–∞—Ç–µ–≥–æ—Ä–∏–∏)**
- `/modules/habit-tracker/features/categories/types/index.ts` ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Category
- `/modules/habit-tracker/features/categories/utils/categoryHelpers.ts` ‚Äî –º–∏–≥—Ä–∞—Ü–∏—è, –ø–æ–ª—É—á–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞

**Habit-specific –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã:**
- `/modules/habit-tracker/shared/constants/units.ts` ‚Äî UNIT_OPTIONS (22 –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è)

### üåê Shared (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏)

**–£—Ç–∏–ª–∏—Ç—ã:**
- `/shared/utils/text/textUtils.ts` ‚Äî declineUnit(), getShortUnit(), formatNumber(), —Å–∫–ª–æ–Ω–µ–Ω–∏–µ —Å–ª–æ–≤
- `/shared/utils/date/dateUtils.ts` ‚Äî formatDate(), getDaysInMonth(), getDayName()

**–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:**
- `/shared/constants/colors.ts` ‚Äî TAG_COLORS, STRENGTH_THRESHOLDS, UI_COLORS
- `/shared/constants/validation.ts` ‚Äî VALIDATION_RULES, MAX_HABIT_NAME_LENGTH
- `/shared/constants/icons.ts` ‚Äî AVAILABLE_ICONS
- `/shared/constants/ui.ts` ‚Äî UI_SIZES, Z_INDEX

### üè™ Core Store (Zustand)

**–ì–ª–∞–≤–Ω—ã–π store:**
- `/core/store/index.ts` ‚Äî create(), persist(), –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ slices
- `/core/store/types.ts` ‚Äî HabitsState (–ø–æ–ª–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å store)
- `/core/store/initialState.ts` ‚Äî –Ω–∞—á–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

**Slices:**
- `/core/store/slices/habits.ts` ‚Äî addHabit(), updateHabit(), deleteHabit(), toggleCompletion()
- `/core/store/slices/goals.ts` ‚Äî updateMonthlyGoal()
- `/core/store/slices/ui.ts` ‚Äî setSelectedMonth(), setSelectedYear(), toggleSidebar()
- `/core/store/slices/internal.ts` ‚Äî updateAllHabitsStrength(), incrementCounter()

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ–∏—á

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ñ–∏—á –ø—Ä–æ–≤–µ—Ä—å:

- [ ] –ö–∞–∫ —ç—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞—Å—á—ë—Ç —Å–∏–ª—ã –ø—Ä–∏–≤—ã—á–∫–∏?
- [ ] –ù—É–∂–Ω–æ –ª–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å `recalculateStrength()`?
- [ ] –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∑–∞–º–æ—Ä–æ–∑–∫–æ–π?
- [ ] –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –±–∏–Ω–∞—Ä–Ω—ã–º–∏/–∏–∑–º–µ—Ä–∏–º—ã–º–∏ –ø—Ä–∏–≤—ã—á–∫–∞–º–∏?
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–∏ —ç—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è?
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –ª–∏ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è?

---

**–í–æ–ø—Ä–æ—Å—ã?** –°–º–æ—Ç—Ä–∏ –∫–æ–¥ –≤ —Ñ–∞–π–ª–∞—Ö –≤—ã—à–µ –∏–ª–∏ —Å–ø—Ä–æ—Å–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞! üöÄ